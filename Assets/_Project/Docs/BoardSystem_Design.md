# 보드 시스템 기획 문서

**게임 방식**: Dungeon Raid 스타일 경로 연결
**핵심 메카닉**: 드래그로 같은 색상 블록을 인접하게 연결

---

## 🎮 플레이 방식

### 기본 조작
```
1. 블록을 터치하여 드래그 시작
2. 인접한 같은 색상 블록으로 경로 그리기
3. 손가락을 떼면 연결된 블록 제거 & 효과 발동
4. 블록이 아래로 떨어지고 새 블록 생성
```

### 경로 연결 규칙
- **최소 연결**: 3개 이상
- **인접 조건**: 상하좌우만 가능 (대각선 불가)
- **색상 규칙**: 같은 색상만 연결 가능
- **와일드카드**: 보라 블록은 모든 색과 연결 가능
- **Undo**: 드래그 중 뒤로 돌아가면 마지막 블록 제거

### 연결 예시
```
좋은 예:
🔴⚔️ - 🔴🪓 - 🔴⚔️ - 🔴🔥
→ 4개 연결, 모든 효과 발동!

나쁜 예:
🔴⚔️ - 🔵🛡️
→ 색상이 달라 연결 불가

특수:
🔴⚔️ - 🟣⭐ - 🔴🪓
→ 와일드카드(보라)로 연결 가능!
```

---

## 🌈 블록 효과

### 연결 시 효과 발동
```
같은 색상의 다른 아이콘도 함께 연결 가능!

예: 🔴⚔️ - 🔴🪓 - 🔴🔥 (3개 연결)
→ 검 효과: 공격 +5
→ 도끼 효과: 공격 +8, 방어 -2
→ 화염 효과: 공격 +3, DOT 2턴

총 효과: 공격 +16, 방어 -2, DOT 2턴
```

### 블록별 기본 효과

#### 🔴 붉은 블록 (공격)
| 블록 | 효과 |
|------|------|
| ⚔️ 검 | 공격 +5 |
| 🪓 도끼 | 공격 +8, 방어 -2 |
| 🔥 화염 | 공격 +3, DOT 2 (2턴) |

#### 🔵 푸른 블록 (방어)
| 블록 | 효과 |
|------|------|
| 🛡️ 방패 | 방어 +5 |
| 💨 회피 | 방어 +3, 회피 30% |
| ⚡ 반격 | 방어 +2, 반격 50% |

#### 🟡 노란 블록 (재물)
| 블록 | 효과 |
|------|------|
| 💰 금화 | 골드 +1 |
| 💎 보석 | 골드 +3 |
| ⭐ 보너스 | 보상 등급 +1 |

#### 🟤 갈색 블록 (중립/특수)
| 블록 | 효과 | 생성 확률 |
|------|------|----------|
| 💩 쓰레기 | 효과 없음 | 80% |
| 🧪 포션 | HP +10 | 15% |
| ✨ 버프 | 다음 공격 +50% | 5% |

#### 🟣 보라 블록 (와일드카드)
| 블록 | 효과 |
|------|------|
| ⭐ 별 | 모든 색과 연결 가능, 생성 확률 5% |

---

## 📊 밸런싱

### 연결 수에 따른 효과
| 연결 수 | 효과 |
|---------|------|
| 3개 | 기본 효과 |
| 4개 | 효과 +10% |
| 5개 | 효과 +25% |
| 6개 이상 | 효과 +50% |

### 효과량 예시 (검 블록)
```
3개 연결: 5 + 5 + 5 = 15 공격
4개 연결: 15 + 5 = 20 × 1.1 = 22 공격
5개 연결: 20 + 5 = 25 × 1.25 = 31 공격
6개 연결: 25 + 5 = 30 × 1.5 = 45 공격
```

### 블록 생성 확률 (초기)
```
🔴 붉은 블록: 40%
  - 검 100%

🔵 푸른 블록: 40%
  - 방패 100%

🟡 노란 블록: 10%
  - 금화 100%

🟤 갈색 블록: 9.5%
  - 쓰레기 84%
  - 포션 16%

🟣 보라 블록: 0.5%
  - 별 100%
```

---

## 🎁 블록 빌딩 시스템

### 핵심 개념: BlockPool
```
BlockPool = 현재 보드에 출현 가능한 블록들의 풀

- 각 블록은 "출현 가중치"를 가짐
- 가중치가 높을수록 자주 생성됨
- 전투 승리 보상으로 풀을 변화시킴
- 게임이 진행될수록 강력한 풀 구축 (로그라이크 핵심)
```

### 블록 획득
```
전투 승리 후 보상으로 새 블록 추가 가능

예: "🪓 도끼 블록 추가" 선택
→ 이후 보드에 도끼 블록이 생성되기 시작
→ 검 블록 비율은 줄어듦
```

### 블록 풀 변화 예시
```
[초기 상태]
검 40%, 방패 40%, 금화 10%, 쓰레기 8%, 포션 1.5%, 별 0.5%

[도끼 블록 추가 후]
검 33%, 도끼 17%, 방패 33%, 금화 8%, 쓰레기 7%, 포션 1.2%, 별 0.4%

→ 붉은 블록 종류는 늘어나고, 각 블록의 출현율 재조정
```

### 보상 시스템

#### 보상 타입
```
1. 새 블록 추가
   - 풀에 없던 블록 타입 추가
   - 초기 가중치로 시작
   - 예: "도끼 블록 추가" → 이후 도끼가 보드에 등장

2. 블록 업그레이드
   - 기존 블록의 효과 증가
   - 레벨업 (Lv0 → Lv1 → Lv2)
   - 예: "검 강화 Lv1" → 공격 5 → 8

3. 출현률 증가
   - 특정 블록의 가중치 증가
   - 원하는 블록을 더 자주 볼 수 있음
   - 예: "포션 확률 증가" → 포션 1.5% → 4%

4. 블록 제거 (고급)
   - 원하지 않는 블록을 풀에서 제거
   - 예: "쓰레기 블록 제거" → 더 좋은 블록만 나옴
```

#### 보상 선택지 구성
```
매 전투 승리 후: 3개 중 1개 선택

예시 (첫 전투 승리):
┌─────────────────────────────┐
│ 선택지 1: 도끼 블록 추가      │
│ 선택지 2: 검 강화 (Lv0→Lv1) │
│ 선택지 3: 금화 확률 +5%      │
└─────────────────────────────┘

선택의 깊이:
- 새 블록 vs 기존 블록 강화
- 공격력 vs 생존력 vs 재물
- 즉시 효과 vs 장기 투자
```

### 게임 진행 예시

#### 초기 풀 (게임 시작)
```
🔴 검 (가중치 50) - 공격 5
🔵 방패 (가중치 50) - 방어 5

→ 가장 기본적인 공격/방어만 가능
→ 단순하지만 명확한 시작
```

#### 1전투 승리 후
```
보상 선택: "🟡 금화 블록 추가"

현재 풀:
🔴 검 (40) - 공격 5
🔵 방패 (40) - 방어 5
🟡 금화 (20) - 골드 1

→ 이제 골드를 모을 수 있음
→ 하지만 검/방패 출현은 줄어듦
```

#### 2전투 승리 후
```
보상 선택: "🔴 검 강화 Lv1"

현재 풀:
🔴 검 Lv1 (40) - 공격 8 ⬆️
🔵 방패 (40) - 방어 5
🟡 금화 (20) - 골드 1

→ 검이 강해져서 공격 빌드 시작
```

#### 3전투 승리 후
```
보상 선택: "🔴 도끼 블록 추가"

현재 풀:
🔴 검 Lv1 (35) - 공격 8
🔴 도끼 (20) - 공격 12
🔵 방패 (30) - 방어 5
🟡 금화 (15) - 골드 1

→ 강력한 공격 옵션 확보
→ 하지만 방어 블록 비율 감소
→ 리스크/리턴 트레이드오프
```

#### 후반 풀 (성장 완료)
```
🔴 검 Lv2 (30) - 공격 11
🔴 도끼 Lv1 (25) - 공격 15
🔴 화염 (15) - 공격 8 + DOT 3
🔵 방패 Lv1 (25) - 방어 8
🔵 반격 (15) - 방어 5 + 반격 50%
🟡 금화 Lv1 (20) - 골드 2
🟤 포션 (15) - 회복 12
🟣 별 (5) - 와일드카드

→ 다양한 전략 가능
→ 강력한 시너지
→ 각자만의 빌드 완성
```

### 전략적 선택

#### 공격 빌드
```
목표: 빠른 전투 종료, 높은 리스크

우선 추가:
- 🔴 도끼 (강공격)
- 🔴 화염 (DOT)

우선 강화:
- 검 Lv2까지 집중 강화

장점: 짧은 전투, 적이 공격 전에 처치
단점: 방어 부족, 실수 시 치명적
```

#### 방어 빌드
```
목표: 안정적 생존, 낮은 리스크

우선 추가:
- 🔵 회피 (회피율)
- 🟤 포션 (회복)

우선 강화:
- 방패 Lv2까지 집중 강화

장점: 오래 버팀, 실수 허용
단점: 긴 전투, 데미지 부족하면 교착
```

#### 골드 빌드
```
목표: 골드로 좋은 보상 구매 (확장 시)

우선 추가:
- 🟡 보석 (대량 골드)
- 🟡 금화 확률 증가

우선 강화:
- 금화 Lv2까지

장점: 상점에서 강력한 아이템 구매 가능 (미래 확장)
단점: 전투력 부족, MVP에서는 효과 제한적
```

#### 균형 빌드
```
목표: 상황에 따라 유연한 대응

전략:
- 검/방패 둘 다 강화
- 포션 확률 증가
- 와일드카드 확보

장점: 어떤 상황에도 대응 가능
단점: 특화된 빌드보다 약함
```

### 디자인 고려사항

#### 1. 풀 희석 문제
```
문제: 블록 10종 추가 시 원하는 블록이 안 나옴

해결책:
- 가중치 조정 보상 제공
- 블록 제거 보상 (고급)
- 최대 블록 종류 제한 (예: 8종)
- 같은 색상 블록은 함께 작동하므로 희석 영향 적음
```

#### 2. 보상 밸런스
```
새 블록 추가 vs 업그레이드:

새 블록:
- 가치: 전략 다양성 증가
- 리스크: 기존 블록 희석

업그레이드:
- 가치: 확실한 강화
- 리스크: 단조로움

권장 비율: 신규 60% / 업그레이드 40%
→ 다양성을 우선하되 강화 기회도 제공
```

#### 3. 난이도 조절
```
보상 빈도로 난이도 조절:

Easy: 모든 전투 후 보상
Normal: 2전투마다 보상
Hard: 3전투마다 보상

→ MVP는 모든 전투 후 보상 (성장감 중시)
```

#### 4. 초기 풀 설정
```
옵션 A: 최소 2종 (검, 방패)
- 장점: 명확한 시작, 성장감 극대화
- 단점: 초반 단조로움
- 권장: MVP에 적합 ✅

옵션 B: 기본 4종 (검, 방패, 금화, 쓰레기)
- 장점: 처음부터 다양성
- 단점: 성장감 약화
- 권장: 확장 버전에 적합
```

### 구현 우선순위

#### MVP (Week 2)
```
✅ 필수:
- BlockPool 기본 구현
- 새 블록 추가 보상
- 가중치 기반 생성
- 보상 선택 UI (3개 중 1개)

🔶 선택:
- 블록 업그레이드 시스템
- 가중치 조정 보상
```

#### 확장 (Post-MVP)
```
🔶 추가 기능:
- 블록 제거 보상
- 더 복잡한 보상 (2개 선택 등)
- 상점 시스템 (골드 사용)
- 유물과 BlockPool 연동
```

---

## 🎨 시각적 피드백

### 드래그 경로 표시
```
경로 연결 중:
- 선으로 연결된 블록들 표시
- 선 색상 = 연결 중인 블록 색상
- 두께: 3px
- 애니메이션: 부드러운 펄스 효과
```

### 블록 상태 표시
```
경로에 포함됨: 밝게 + 1.1배 확대
연결 가능: 살짝 밝게 (가이드)
연결 불가: 어둡게 (피드백)
```

### 효과 표시
```
블록 제거 시:
- 파티클 효과 (0.2초)
- 블록 색상에 맞는 파티클

효과 발동 시:
- 숫자 팝업 (데미지, 방어, 회복 등)
- 색상별로 구분:
  🔴 공격: 빨간 숫자
  🔵 방어: 파란 숫자
  🟢 회복: 초록 숫자
  🟡 골드: 노란 숫자
```

---

## 🎯 전략적 깊이

### 의사결정 요소

#### 1. 길이 vs 효과
```
선택 A: 검 5개 연결 → 공격 31
선택 B: 검 3개 + 포션 3개 → 공격 15 + 회복 30

→ 지금 공격? 아니면 회복하고 다음 턴?
```

#### 2. 색상 선택
```
보드 상황:
- 붉은 블록 경로: 6개 가능 (공격 45)
- 푸른 블록 경로: 4개 가능 (방어 22)

적 행동:
- 다음 턴에 강공격 30 예정

→ 방어를 쌓을까? 아니면 공격해서 먼저 처치?
```

#### 3. 와일드카드 활용
```
보드에 보라 블록(별) 1개 등장

선택 A: 붉은 블록 2개 + 별 + 붉은 블록 3개 = 6개 연결
선택 B: 별을 아껴서 더 긴 체인 노리기

→ 지금 쓸까? 나중을 위해 아낄까?
```

---

## 📦 MVP 범위

### Week 1
```
✅ 기본 조작 (드래그 연결)
✅ 2가지 색상 (붉은/푸른)
✅ 각 1종 블록 (검/방패)
✅ 기본 효과 (공격/방어)
✅ 경로 시각화
```

### Week 2
```
✅ 5가지 색상 전체
✅ 각 색상 2종씩 (총 10종)
✅ 블록 빌딩 시스템
✅ 모든 효과 구현
✅ 밸런싱 수치 적용
```

### Week 3 (선택)
```
🔶 와일드카드
🔶 Undo 기능
🔶 경로 예측
🔶 애니메이션 polish
```

---

## 💡 디자인 의도

### 왜 경로 연결 방식?
```
vs 스와이프 교환 방식:
- ✅ 더 전략적 (긴 체인 만들기)
- ✅ 더 만족스러운 피드백
- ✅ 빠른 플레이 가능
- ✅ Dungeon Raid의 검증된 재미
```

### 왜 같은 색상 다른 효과 연결?
```
- ✅ 시너지 조합의 재미
- ✅ 블록 빌딩과 자연스럽게 연결
- ✅ 전략적 깊이 증가
- ✅ 매 런마다 다른 플레이 경험
```

### 왜 순수 턴제?
```
- ✅ 보드 전체를 깊게 분석 가능
- ✅ 최적의 경로 찾기의 재미
- ✅ 로그라이크와 잘 어울림
- ✅ 초보자도 편하게 플레이
```

---

## 🔮 향후 확장 가능성

### 더 많은 블록 종류
```
각 색상당 5-10종으로 확장
예: 붉은 블록
  - 검, 도끼, 화염, 독, 폭발, 관통, 흡혈 등
```

### 특수 보드 규칙
```
- 장애물 블록
- 잠긴 블록
- 시간 제한 블록
- 보드 크기 변화
```

### 난이도 모드
```
- Easy: 시간 제한 없음
- Normal: 20초 제한
- Hard: 10초 + 적 강화
```

---

**작성일**: 2025-12-12
**버전**: 1.0
**담당**: 게임 디자인
