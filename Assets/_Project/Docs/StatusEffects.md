# 상태 효과 데이터 (Status Effects)

**프로젝트**: MatchBattle
**버전**: 1.0
**작성일**: 2025-12-17
**관련 문서**:
- [EnemyDesign.md](EnemyDesign.md) - 적 시스템 설계
- [EnemyPatterns.md](EnemyPatterns.md) - 적 행동 패턴 데이터
- [CombatSystem_Design.md](CombatSystem_Design.md) - 전투 시스템

---

## 📋 목차

1. [버프 (Buff)](#버프-buff) - 적 강화 효과
2. [디버프 (Debuff)](#디버프-debuff) - 플레이어 약화 효과
3. [적용 규칙](#적용-규칙)
4. [구현 우선순위](#구현-우선순위)

---

## 💪 버프/디버프 (Buff/Debuff)

> 공격력을 증감시키는 효과 (양수/음수에 따라 버프/디버프)

### STR - 힘

```
ID: STR
이름: 힘
효과: 공격력 ±N (양수/음수 모두 가능)
지속: 영구
스택: 수치 누적
분류: 양수 시 버프, 음수 시 디버프

UI:
  아이콘: 💪 (양수: 빨강, 음수: 회색)
  표시: 💪5 또는 💪-3 (현재 힘 수치)
  위치: 적/플레이어 상단

예시:
- 힘(5) → 💪5, 공격력 +5 (버프)
- 힘(-3) → 💪-3, 공격력 -3 (디버프)
- 힘(0) → 아이콘 표시 안 함

스택 예시:
- 힘(5) + 힘(3)
  → 힘(8)
  → UI: 💪8
  → 적 기본 공격 10 → 18 데미지

음수 예시:
- 힘(0) + 힘(-2)
  → 힘(-2)
  → UI: 💪-2
  → 적 기본 공격 10 → 8 데미지

양수+음수 조합:
- 힘(5) + 힘(-3)
  → 힘(2)
  → UI: 💪2
  → 순수치로 계산

참고: Slay the Spire의 "Strength" 시스템
```

---

## 🛡️ 버프 (Buff)

> 적 자신에게 적용되는 강화 효과

### ARMOR - 철갑

```
ID: ARMOR
이름: 철갑
효과: 철갑 +N (피격 시 데미지 감소)
지속: 피격 시 소모
스택: 수치 누적

UI:
  아이콘: 🛡️ (파란색)
  표시: 🛡️10 (현재 철갑 수치)
  위치: 적 상단

예시:
- 철갑 +10 → 🛡️10
- 철갑 +15 → 🛡️15

스택 예시:
- 철갑 +10 + 철갑 +5
  → 철갑 +15
  → UI: 🛡️15
  → 플레이어 공격 20 → 적 실제 피해 5 (철갑 15 소모, 0 남음)

메커니즘:
- 피격 시 철갑이 먼저 데미지 흡수
- 철갑 > 데미지: 철갑만 감소
- 철갑 < 데미지: 철갑 0 + 남은 데미지는 HP 감소
```

---

### REGEN - 재생

```
ID: REGEN
이름: 재생
효과: 턴마다 HP +N 회복, 그 후 재생 -1 감소
지속: 0이 될 때까지
스택: 수치 누적

UI:
  아이콘: ✚ (초록색)
  표시: ✚5 (현재 재생 수치)
  위치: 적 상단

예시:
- 재생 3 → ✚3
- 재생 5 → ✚5

스택 예시:
- 재생 3 + 재생 2
  → 재생 5
  → UI: ✚5

메커니즘:
- 적 턴 시작 시:
  1. 현재 재생 수치만큼 HP 회복
  2. 재생 수치 -1 감소
  3. 재생 0이 되면 제거

턴 진행 예시 (재생 5):
- 턴 1: HP +5, 재생 5 → 4
- 턴 2: HP +4, 재생 4 → 3
- 턴 3: HP +3, 재생 3 → 2
- 턴 4: HP +2, 재생 2 → 1
- 턴 5: HP +1, 재생 1 → 0 (제거)
- 총 회복: 5+4+3+2+1 = 15 HP

회복량 팝업 표시: (+5, 초록색)
```

---

## 🩹 디버프 (Debuff)

> 플레이어에게 적용되는 약화 효과

### POISON - 독

```
ID: POISON
이름: 독
효과: 턴마다 HP -N, 그 후 독 -1 감소
지속: 0이 될 때까지
스택: 수치 누적

UI:
  아이콘: 💀 (보라색)
  표시: 💀5 (현재 독 수치)
  위치: 플레이어 상단

예시:
- 독 3 → 💀3
- 독 5 → 💀5

스택 예시:
- 독 3 + 독 2
  → 독 5
  → UI: 💀5

메커니즘:
- 플레이어 턴 시작 시:
  1. 현재 독 수치만큼 HP 감소
  2. 독 수치 -1 감소
  3. 독 0이 되면 제거

턴 진행 예시 (독 5):
- 턴 1: HP -5, 독 5 → 4
- 턴 2: HP -4, 독 4 → 3
- 턴 3: HP -3, 독 3 → 2
- 턴 4: HP -2, 독 2 → 1
- 턴 5: HP -1, 독 1 → 0 (제거)
- 총 데미지: 5+4+3+2+1 = 15

데미지 팝업 표시: (-5, 보라색)
```

---

### WEAK - 약화

```
ID: WEAK
이름: 약화
효과: 공격력 -N%
지속: N턴
스택: 지속시간만 증가 (효과는 유지)

UI:
  아이콘: ↓ (회색)
  표시: ↓5 (남은 턴 수)
  위치: 플레이어 상단

예시:
- 약화 -30% (2턴) → ↓2
- 약화 -25% (3턴) → ↓3

스택 예시:
- 약화 -30% (2턴) + 약화 -25% (3턴)
  → 약화 -30% (5턴)
  → UI: ↓5
  → 공격 20 → 약화 -30% → 실제 14 데미지

메커니즘:
- 플레이어 공격 시 데미지 감소
- 예: 공격 20 → 약화 -30% → 실제 14 데미지
```

---

### VULNERABLE - 취약

```
ID: VULNERABLE
이름: 취약
효과: 받는 데미지 +N%
지속: N턴
스택: 가능 (효과 누적, 지속시간 갱신)

UI:
  아이콘: ⚠️ (보라색)
  표시: ⚠️2 (남은 턴 수)
  위치: 플레이어 상단

예시:
- 취약 +50% (2턴) → ⚠️2
- 취약 +75% (1턴) → ⚠️1

스택 예시:
- 취약 +50% (2턴) + 취약 +25% (3턴)
  → 취약 +75% (3턴)
  → UI: ⚠️3
  → 적 공격 10 → 취약 +75% → 실제 17.5 데미지

메커니즘:
- 적 공격 시 플레이어가 받는 데미지 증가
- 예: 적 공격 10 → 취약 +50% → 실제 15 데미지
```

---

### EXHAUSTED - 탈진

```
ID: EXHAUSTED
이름: 탈진
효과: 턴 종료 시 힘(STR) N만큼 감소
지속: 턴 종료 시 발동 후 소멸
스택: 수치 누적
대상: 적 (자신)

UI:
  아이콘: 📉 (회색)
  표시: 📉5 (턴 종료 시 감소할 수치)
  위치: 적 상단

예시:
- 탈진(5) → 📉5
- 탈진(3) → 📉3

일시적 강화 구현:
적이 일시적으로 강화되려면 두 가지를 동시에 적용:
1. 힘(+5) 획득 → 공격력 +5
2. 탈진(5) 획득 → 턴 종료 시 힘 -5

턴 진행 예시:
- 초기 상태: 힘(0), 공격력 10
- 일시적 강화 발동: 힘(+5) + 탈진(5) 획득
  → UI: 💪5 📉5
  → 공격력 10 → 15
- 턴 중: 공격력 15로 공격
- 턴 종료: 탈진(5) 발동
  → 힘 5 - 5 = 0
  → 탈진(5) 소멸
- 다음 턴: 힘(0), 공격력 10으로 복구

복합 예시 (영구 + 일시적):
- 초기: 힘(3), 공격력 13
- 일시적 강화: 힘(+5) + 탈진(5)
  → 힘 3 + 5 = 8
  → UI: 💪8 📉5
  → 공격력 13 → 18
- 턴 종료: 탈진(5) 발동
  → 힘 8 - 5 = 3
  → 공격력 18 → 13
- 결과: 영구 힘(3)은 유지

음수 예시 (약화):
- 초기: 힘(0), 공격력 10
- 힘 감소: 힘(-3) 획득
  → UI: 💪-3
  → 공격력 10 → 7

스택 예시:
- 탈진(5) + 탈진(3)
  → 탈진(8)
  → UI: 📉8
  → 턴 종료 시 힘 8 감소

참고: Slay the Spire의 "Lose Strength" 시스템
```

---

## ⚙️ 적용 규칙

### UI 표시 규칙

```
아이콘 배치:
┌─────────────────────┐
│ 적 상단             │
│  💪5 🛡️10 ✚2 📉5   │  ← 버프/디버프
└─────────────────────┘

┌─────────────────────┐
│ 플레이어 상단       │
│  💀3 ↓1 ⚠️2        │  ← 디버프들
└─────────────────────┘

표시 형식:
- 아이콘 + 숫자 (남은 턴 수 또는 수치)
- 영구 효과: 아이콘만 (숫자 없음)
- 여러 효과: 가로로 나열

색상:
- 버프: 밝은 색상 (빨강, 파랑, 초록 등)
- 디버프: 어두운/경고 색상 (녹색, 주황, 회색, 보라 등)
```

### 우선순위 및 적용 순서

```
턴 시작 시 순서:
1. 재생 (REGEN)
   - 현재 재생 수치만큼 HP 회복
   - 재생 수치 -1 감소
2. 버프/디버프 지속시간 -1
   - WEAK, VULNERABLE: 지속시간 -1
3. DOT 데미지 (독)
   - 현재 독 수치만큼 HP 감소
   - 독 수치 -1 감소

턴 종료 시 순서:
1. 탈진 (EXHAUSTED)
   - 힘 수치 N만큼 감소
   - 탈진 소멸

데미지 계산 순서:
1. 버프/디버프 % 계산 (약화, 취약)
2. 기본 데미지 계산
3. 최종 데미지 적용
```

---

## 🎯 구현 우선순위

### MVP (현재 구현)

```
✅ 버프/디버프 (공통):
  - STR (힘) - 공격력 증감 (양수=버프, 음수=디버프)
    - 오크 HP 50% 이하: 힘(+5) 자동 발동 (영구)

✅ 버프 (적):
  - ARMOR (철갑) - 슬라임, 오크 방어 행동

✅ 디버프 (적 자신):
  - EXHAUSTED (탈진) - 일시적 강화 구현용 (턴 종료 시 힘 감소)

✅ 디버프 (플레이어):
  - 없음 (MVP에서는 제외)
```

### Post-MVP Phase 1

```
🔶 버프:
  - REGEN (재생) - 골렘, 트롤

🔶 디버프:
  - POISON (독) - 고블린, 버섯 괴물, 마법사

참고: STR(힘)은 MVP에서 오크 전용으로 구현, Phase 1에서 일반 적 버프 행동으로 확장
```

### Post-MVP Phase 2

```
🔶 디버프:
  - WEAK (약화) - 저주사, 다크 나이트
  - VULNERABLE (취약) - 오크 대장, 버서커
```

### Post-MVP Phase 3

```
🔶 정화 시스템:
  - 플레이어가 디버프 제거 가능
  - 정화 블록 또는 포션

🔶 상태 효과 조합:
  - 독 + 화상 동시 적용
  - 약화 + 취약 동시 적용
  - 복잡한 시너지
```

---

**작성일**: 2025-12-17
**버전**: 1.0
**담당**: 게임 디자인
