# 전투 UI 기획 문서

**작성일**: 2025-12-13
**버전**: v1.0
**상태**: 기획 완료

---

## 📋 개요

전투 시스템의 UI/UX 설계 문서입니다. 플레이어와 적의 상태를 명확하게 표시하고, 전투 피드백을 직관적으로 전달하는 것을 목표로 합니다.

### 설계 원칙
1. **명확성 우선**: 모든 정보는 한눈에 파악 가능해야 함
2. **단계별 개선**: 텍스트 기반 MVP → 비주얼 강화 → 연출 강화
3. **반응성**: 모든 게임 상태 변화에 즉각적인 UI 피드백 제공
4. **Slay the Spire 스타일**: 행동 예고를 적 HP 위에 배치하여 직관성 확보

---

## 🖼️ 전투 화면 레이아웃

### 전체 구성

```
┌─────────────────────────────────────────┐
│                 적 영역                  │ ← 상단 (20% 높이)
│         [다음 행동: 공격 8]              │
│         ┌─────────────┐                 │
│         │ 슬라임      │                 │
│         │ HP: 40/50   │                 │
│         └─────────────┘                 │
│              🐌                          │
├─────────────────────────────────────────┤
│                                         │
│            보드 영역                     │ ← 중앙 (60% 높이)
│   ┌─────────────────────────┐          │
│   │  8×8 퍼즐 보드          │          │
│   │  🔴🔵🔴🔵🔴🔵🔴🔵        │          │
│   │  ...                    │          │
│   └─────────────────────────┘          │
│                                         │
├─────────────────────────────────────────┤
│          플레이어 영역                   │ ← 하단 (20% 높이)
│   ┌─────────────────────────┐          │
│   │ HP: 80/100              │          │
│   │ 방어력: 15/30           │          │
│   │ 골드: 25                │          │
│   └─────────────────────────┘          │
└─────────────────────────────────────────┘
```

### 영역별 역할

**적 영역 (상단)**
- 적의 모든 정보를 한곳에 집중
- 행동 예고를 가장 위에 배치하여 최우선 정보 전달
- 적 스프라이트로 시각적 몰입감 제공

**보드 영역 (중앙)**
- 플레이어가 가장 많이 상호작용하는 영역
- 화면의 60%를 차지하여 조작 편의성 확보

**플레이어 영역 (하단)**
- 자신의 상태를 항상 확인 가능
- 보드 조작과 겹치지 않는 위치

---

## 🎨 UI 요소 상세 설계

### 1. 적 정보 표시

#### 배치
- 화면 상단 중앙
- 적 스프라이트 위에 정보 박스

#### 구성 요소
```
┌─────────────────────┐
│ [다음 행동: 공격 8] │  ← 행동 예고 (최상단)
├─────────────────────┤
│ 슬라임              │  ← 적 이름
│ HP: 40/50           │  ← 체력
│ 방어력: 5           │  ← 방어력 (있을 경우만 표시)
└─────────────────────┘
        🐌               ← 적 스프라이트
```

#### 표시 정보
1. **적 이름**
   - 텍스트 크기: 중간 (16-20pt)
   - 색상: 흰색 또는 적 타입별 구분 색상

2. **HP (체력)**
   - 형식: "HP: 현재/최대" (예: HP: 40/50)
   - Phase 1: 텍스트만
   - Phase 2: 텍스트 + 수평 HP 바
   - Phase 3: 애니메이션 (HP 감소 시 깜빡임)

3. **방어력**
   - 방어력이 0보다 클 때만 표시
   - 형식: "방어력: 5"
   - Phase 2: 방패 아이콘 추가

4. **행동 예고** ⭐ 핵심 기능
   - 위치: HP 정보 위 (Slay the Spire 스타일)
   - 형식: "다음 행동: [행동 종류] [수치]"
   - 예시:
     - "다음 행동: 공격 8"
     - "다음 행동: ⚠️ 강공격 18"
     - "다음 행동: 방어 +5"
   - 강공격은 ⚠️ 표시로 강조

#### 특수 상태 표시
- **분노 (Enrage)**: 적 이름 옆에 "🔥" 추가 또는 빨간색 강조
- **상태 효과**: HP 아래에 아이콘 표시 (Phase 3)

---

### 2. 플레이어 정보 표시

#### 배치
- 화면 하단 (보드 아래)
- 좌측 정렬 또는 중앙 정렬

#### 구성 요소
```
┌─────────────────────────┐
│ HP: 80/100              │
│ 방어력: 15/30           │
│ 골드: 25                │
└─────────────────────────┘
```

#### 표시 정보
1. **HP (체력)**
   - 형식: "HP: 현재/최대" (예: HP: 80/100)
   - Phase 1: 텍스트만
   - Phase 2: 텍스트 + 수평 HP 바
   - HP가 낮을 때 (30% 이하) 빨간색 강조

2. **방어력**
   - 형식: "방어력: 현재/최대" (예: 방어력: 15/30)
   - 방어력이 0일 때도 표시 (0/30)
   - Phase 2: 방패 아이콘 추가

3. **골드**
   - 형식: "골드: 숫자" (예: 골드: 25)
   - Phase 2: 금화 아이콘 추가

#### 레이아웃 옵션

**옵션 A: 세로 배치 (추천)**
```
HP: 80/100
방어력: 15/30
골드: 25
```
- 장점: 정보가 명확하게 구분됨
- 단점: 세로 공간 차지

**옵션 B: 가로 배치**
```
HP: 80/100  |  방어력: 15/30  |  골드: 25
```
- 장점: 공간 효율적
- 단점: 정보가 밀집되어 가독성 저하 가능

---

### 3. 전투 피드백 요소

#### 데미지/효과 숫자 팝업

**표시 위치**
- 데미지를 받는 대상 위에 팝업
- 플레이어 피격: 플레이어 영역 중앙
- 적 피격: 적 스프라이트 위

**표시 형식**
```
-15        ← 데미지 (빨간색, 크게)
+10        ← 회복 (초록색)
+5 방어력   ← 방어력 증가 (파란색)
+3 골드    ← 골드 획득 (노란색)
```

**애니메이션**
1. Phase 1 (MVP): 텍스트만 1초간 표시 후 사라짐
2. Phase 2: 위로 떠오르며 페이드아웃
3. Phase 3: 크기 변화 + 흔들림 효과

**색상 규칙**
- 데미지: 빨간색 (#FF4444)
- 회복: 초록색 (#44FF44)
- 방어력: 파란색 (#4444FF)
- 골드: 노란색 (#FFD700)

#### 블록 효과 메시지

플레이어가 블록을 연결했을 때 피드백
```
[공격 블록 3개 연결]
→ "공격 15!" (적 위에 표시)

[방어 블록 2개 연결]
→ "+10 방어력" (플레이어 위에 표시)
```

---

### 4. 전투 결과 화면

#### 승리 화면

**레이아웃**
```
┌─────────────────────────────┐
│                             │
│       🎉 승리! 🎉           │
│                             │
│   [적 이름]을 물리쳤습니다   │
│                             │
│   획득 골드: +10            │
│   현재 골드: 35             │
│                             │
│   [계속하기]                │
│                             │
└─────────────────────────────┘
```

**표시 정보**
- 승리 메시지
- 처치한 적 이름
- 획득 골드
- 계속하기 버튼 (보상 선택으로 이동)

#### 패배 화면

**레이아웃**
```
┌─────────────────────────────┐
│                             │
│         패배...             │
│                             │
│  [적 이름]에게 패배했습니다  │
│                             │
│   [다시 시작]               │
│   [메인 메뉴]               │
│                             │
└─────────────────────────────┘
```

**표시 정보**
- 패배 메시지
- 패배 원인 (적 이름)
- 다시 시작 버튼
- 메인 메뉴 버튼 (선택)

#### 공통 사항
- 전체 화면 오버레이 (반투명 검은 배경)
- 중앙에 결과 박스
- Phase 3: 페이드인 애니메이션

---

## 🔄 UI 업데이트 타이밍

### 즉시 업데이트
다음 이벤트 발생 시 UI가 즉시 반영되어야 함:

1. **플레이어 HP 변화**
   - 이벤트: `Player.OnHPChanged`
   - 업데이트: 플레이어 HP 텍스트 (+ HP 바)
   - 피드백: 데미지 숫자 팝업

2. **플레이어 방어력 변화**
   - 이벤트: `Player.OnDefenseChanged`
   - 업데이트: 플레이어 방어력 텍스트
   - 피드백: "+5 방어력" 팝업

3. **플레이어 골드 변화**
   - 이벤트: `Player.OnGoldChanged`
   - 업데이트: 플레이어 골드 텍스트
   - 피드백: "+3 골드" 팝업

4. **적 HP 변화**
   - 이벤트: `Enemy.OnHPChanged`
   - 업데이트: 적 HP 텍스트 (+ HP 바)
   - 피드백: 데미지 숫자 팝업

5. **적 행동 변경**
   - 타이밍: 적 턴 종료 시 (다음 행동 선택)
   - 업데이트: 행동 예고 텍스트
   - 강공격인 경우 ⚠️ 표시

6. **적 분노 상태**
   - 타이밍: HP 50% 이하 도달 시
   - 업데이트: 적 이름 옆에 🔥 표시 또는 빨간색 강조
   - 피드백: "분노!" 메시지 표시

### 전투 상태 변화
1. **전투 시작**
   - 모든 UI 초기화 및 표시
   - 적 정보 로드
   - 플레이어 정보 표시

2. **승리**
   - 승리 화면 오버레이
   - 보상 정보 표시

3. **패배**
   - 패배 화면 오버레이
   - 재시작 옵션 표시

---

## 📐 UI 스타일 가이드

### 텍스트 스타일

**글꼴**
- 권장: 고딕체 (NanumGothic, 나눔스퀘어 등)
- 영문: Arial, Roboto

**크기**
- 제목 (적 이름, 승리/패배): 24-32pt
- 일반 정보 (HP, 방어력): 16-20pt
- 작은 정보 (골드): 14-16pt
- 데미지 팝업: 24-32pt (크고 눈에 띄게)

**색상**
- 기본 텍스트: 흰색 (#FFFFFF)
- HP 낮음 (30% 이하): 빨간색 (#FF4444)
- 강조 (분노, 강공격): 노란색 (#FFD700) 또는 빨간색

### 박스/배경

**배경 색상**
- 반투명 검은색 (rgba(0, 0, 0, 0.7))
- 테두리: 흰색 또는 밝은 회색

**여백**
- 박스 내부 패딩: 10-15px
- 요소 간 간격: 5-10px

### 애니메이션 (Phase 3)

**속도**
- 데미지 팝업: 0.8-1.0초
- HP 바 감소: 0.3-0.5초
- 화면 전환: 0.5초

**이징**
- 데미지 팝업: EaseOut
- HP 바: Linear 또는 EaseOut
- 오버레이: EaseInOut

---

## 🎯 단계별 구현 계획

### Phase 1: 텍스트 기반 MVP

**목표**: 모든 정보를 텍스트로 표시하여 기능 검증

**구현 요소**
- ✅ 플레이어 HP, 방어력, 골드 (텍스트)
- ✅ 적 이름, HP, 방어력 (텍스트)
- ✅ 행동 예고 (텍스트)
- ✅ 데미지 숫자 팝업 (텍스트, 1초 표시)
- ✅ 승리/패배 화면 (텍스트 박스)

**UI 컴포넌트**
- Unity UI Text 또는 TextMeshPro
- Canvas + Panel (배경)

**완료 기준**
- 모든 전투 정보가 화면에 표시됨
- 상태 변화 시 UI가 즉시 업데이트됨
- 승리/패배 화면이 정상 작동

---

### Phase 2: 비주얼 강화

**목표**: 시각적 요소 추가로 가독성 및 몰입감 향상

**구현 요소**
- ✅ HP 바 (수평 프로그레스 바)
  - 플레이어 HP 바
  - 적 HP 바
  - HP 감소 시 부드러운 애니메이션

- ✅ 아이콘 추가
  - ❤️ HP 아이콘
  - 🛡️ 방어력 아이콘
  - 💰 골드 아이콘
  - ⚠️ 강공격 경고 아이콘

- ✅ 행동 예고 아이콘화
  - ⚔️ 일반 공격
  - ⚠️⚔️ 강공격 (빨간색 강조)
  - 🛡️ 방어
  - ⬆️ 버프
  - ⬇️ 디버프

- ✅ 적 스프라이트 배치
  - 적 정보 박스 아래에 큰 스프라이트
  - 피격 시 흔들림 효과

**완료 기준**
- HP 바가 정확하게 HP를 반영
- 아이콘이 정보를 보조하여 가독성 향상
- 행동 예고가 직관적으로 이해됨

---

### Phase 3: 연출 강화

**목표**: 전투의 타격감과 화려함 증대

**구현 요소**
- ✅ 데미지 숫자 애니메이션
  - 위로 떠오르며 페이드아웃
  - 크기 변화 (작게 → 크게 → 작게)

- ✅ HP 바 애니메이션
  - HP 감소 시 부드러운 감소
  - 낮은 HP에서 깜빡임 효과

- ✅ 파티클 효과
  - 공격 히트 시 파티클
  - 블록 제거 시 파티클
  - 승리 시 축하 파티클

- ✅ 화면 효과
  - 피격 시 화면 흔들림 (Screenshake)
  - 강공격 시 화면 플래시

- ✅ 전환 애니메이션
  - 승리/패배 화면 페이드인
  - 행동 예고 변경 시 애니메이션

**완료 기준**
- 모든 액션에 명확한 시각적 피드백
- 타격감과 몰입감 향상
- 과도하지 않은 적절한 연출

---

## 💡 추가 고려사항

### 접근성
- 색맹 대응: 색상뿐만 아니라 아이콘/텍스트로도 정보 전달
- 텍스트 크기: 최소 14pt 이상 유지
- 대비: 배경과 텍스트의 명도 차이 충분히 확보

### 성능
- 데미지 팝업: 동시에 표시되는 개수 제한 (최대 5개)
- 파티클: 가벼운 파티클 사용, 오버드로우 최소화
- 애니메이션: 필수적인 것만 적용

### 확장성
- 상태 효과 아이콘 슬롯 예약 (Phase 3 이후)
- 유물 효과 표시 공간 고려
- 멀티플 적 대응 (현재는 1:1만)

---

## 📝 참고 사항

### 레퍼런스 게임
- **Slay the Spire**: 행동 예고 시스템, 깔끔한 정보 표시
- **Dungeon Raid**: 간결한 UI, 명확한 피드백
- **Marvel Puzzle Quest**: HP 바 + 숫자 조합

### 개발 우선순위
1. **Phase 1 완료** (1-2일): 텍스트 기반 UI 구현
2. **Phase 2 일부** (2-3일): HP 바 + 기본 아이콘
3. **게임플레이 테스트**: UI 가독성 및 편의성 검증
4. **Phase 2 완료 + Phase 3** (추후): 연출 강화

---

**작성일**: 2025-12-13
**최종 수정**: 2025-12-13
**상태**: 기획 완료, 구현 대기
