# 상태 효과 데이터 (Status Effects)

**프로젝트**: MatchBattle
**버전**: 1.0
**작성일**: 2025-12-17
**관련 문서**:
- [EnemyDesign.md](EnemyDesign.md) - 적 시스템 설계
- [EnemyPatterns.md](EnemyPatterns.md) - 적 행동 패턴 데이터
- [CombatSystem_Design.md](CombatSystem_Design.md) - 전투 시스템

---

## 📋 목차

1. [설계 원칙](#설계-원칙)
2. [버프 (Buff)](#버프-buff) - 적 강화 효과
3. [디버프 (Debuff)](#디버프-debuff) - 플레이어 약화 효과
4. [적용 규칙](#적용-규칙)
5. [구현 우선순위](#구현-우선순위)

---

## 🎯 설계 원칙

### 단일 숫자 원칙

**핵심 규칙**: 하나의 효과는 숫자로 표기되는 상태를 **하나만** 가지거나 아예 없음

```
✅ 좋은 예:
- 힘(5) → 공격력 +5
- 약화(3) → 공격력 -25% (고정), 3턴
- 독(5) → 매 턴 HP -5, 그 후 -1 감소

❌ 나쁜 예:
- 힘(3, 5턴) → 두 개의 숫자 (X)
- 약화(3, -30%) → 두 개의 숫자 (X)
- 독(5, 3턴) → 두 개의 숫자 (X)
```

### 효과 타입 분류

```
타입 1: 스택형 (숫자 = 효과 크기, 영구)
┌────────────┬──────────┬─────────────────────┐
│ 효과       │ 표기     │ 의미                │
├────────────┼──────────┼─────────────────────┤
│ STR        │ 💪5      │ 공격력 +5           │
│ PLATED     │ 🛡️10    │ 받는 피해 -10 (고정)│
│ EXHAUSTED  │ 📉5      │ 턴 종료 시 -5       │
└────────────┴──────────┴─────────────────────┘

타입 2: 감소형 (초기값, 매 턴 감소)
┌────────────┬──────────┬────────────────┐
│ 효과       │ 표기     │ 의미           │
├────────────┼──────────┼────────────────┤
│ REGEN      │ ✚5       │ 매 턴 HP +5→4  │
│ POISON     │ 💀5      │ 매 턴 HP -5→4  │
└────────────┴──────────┴────────────────┘

타입 3: 지속형 (효과 고정, 숫자 = 턴 수)
┌────────────┬──────────┬────────────────┐
│ 효과       │ 표기     │ 의미           │
├────────────┼──────────┼────────────────┤
│ WEAK       │ ↓3       │ -25% (고정), 3턴│
│ VULNERABLE │ ⚠️2      │ +50% (고정), 2턴│
└────────────┴──────────┴────────────────┘
```

### 일시적 효과 구현

```
일시적 강화 = 영구 효과 + 탈진 조합
예: 1턴 동안만 공격력 +5

방법:
1. 힘(+5) 부여 → 공격력 +5
2. 탈진(5) 부여 → 턴 종료 시 힘 -5
3. 결과: 1턴 동안만 강화, 자동 복구

UI: 💪5 📉5
```

---

## 💪 버프/디버프 (Buff/Debuff)

> 공격력을 증감시키는 효과 (양수/음수에 따라 버프/디버프)

### STR - 힘

```
ID: STR
이름: 힘
타입: 스택형
효과: 공격력 ±N (양수/음수 모두 가능)
분류: 양수 시 버프, 음수 시 디버프

UI:
  아이콘: 💪 (양수: 빨강, 음수: 회색)
  표시: 💪5 또는 💪-3 (현재 힘 수치)
  위치: 적/플레이어 상단

예시:
- 힘(5) → 💪5, 공격력 +5 (버프)
- 힘(-3) → 💪-3, 공격력 -3 (디버프)
- 힘(0) → 아이콘 표시 안 함

스택 예시:
- 힘(5) + 힘(3)
  → 힘(8)
  → UI: 💪8
  → 적 기본 공격 10 → 18 데미지

음수 예시:
- 힘(0) + 힘(-2)
  → 힘(-2)
  → UI: 💪-2
  → 적 기본 공격 10 → 8 데미지

양수+음수 조합:
- 힘(5) + 힘(-3)
  → 힘(2)
  → UI: 💪2
  → 순수치로 계산

참고: Slay the Spire의 "Strength" 시스템
```

---

## 🛡️ 버프 (Buff)

> 적 자신에게 적용되는 강화 효과

### PLATED - 금속화

```
ID: PLATED
이름: 금속화
타입: 스택형
효과: 받는 데미지를 N만큼 감소 (영구, 소모 없음)

UI:
  아이콘: 🛡️ (파란색)
  표시: 🛡️10 (데미지 감소량)
  위치: 적 상단

예시:
- 금속화 +5 → 🛡️5
- 금속화 +3 → 🛡️3

스택 예시:
- 금속화 +5 + 금속화 +3
  → 금속화 +8
  → UI: 🛡️8

메커니즘:
- 피격 시 받는 데미지를 N만큼 감소
- 금속화 수치는 소모되지 않음 (영구 유지)
- 여러 번 공격받아도 매번 적용
- 예시:
  - 금속화 10, 공격 25 받음 → 실제 피해 15 (25-10)
  - 금속화 10, 공격 8 받음 → 실제 피해 0 (8-10, 최소 0)
  - 금속화 10 유지됨
  - 공격 15 또 받음 → 실제 피해 5 (15-10)
  - 금속화 10 여전히 유지

방어력과의 차이:
- 방어력: 피격 시 소모됨 (일회용)
- 금속화: 소모되지 않음 (영구)

제거:
- 자연적으로 사라지지 않음
- 특수 효과(금속화 감소, 디스펠 등)로만 제거 가능
- MVP에서는 금속화 제거 메커니즘 없음

비교:
- 전통적인 RPG의 방어력(Armor Rating)과 유사
- 고정 데미지 감소 효과
```

---

### REGEN - 재생

```
ID: REGEN
이름: 재생
타입: 감소형
효과: 턴마다 HP +N 회복, 그 후 재생 -1 감소

UI:
  아이콘: ✚ (초록색)
  표시: ✚5 (현재 재생 수치)
  위치: 적 상단

예시:
- 재생 3 → ✚3
- 재생 5 → ✚5

스택 예시:
- 재생 3 + 재생 2
  → 재생 5
  → UI: ✚5

메커니즘:
- 적 턴 시작 시:
  1. 현재 재생 수치만큼 HP 회복
  2. 재생 수치 -1 감소
  3. 재생 0이 되면 제거

턴 진행 예시 (재생 5):
- 턴 1: HP +5, 재생 5 → 4
- 턴 2: HP +4, 재생 4 → 3
- 턴 3: HP +3, 재생 3 → 2
- 턴 4: HP +2, 재생 2 → 1
- 턴 5: HP +1, 재생 1 → 0 (제거)
- 총 회복: 5+4+3+2+1 = 15 HP

회복량 팝업 표시: (+5, 초록색)
```

---

## 🩹 디버프 (Debuff)

> 플레이어에게 적용되는 약화 효과

### POISON - 독

```
ID: POISON
이름: 독
타입: 감소형
효과: 턴마다 HP -N, 그 후 독 -1 감소

UI:
  아이콘: 💀 (보라색)
  표시: 💀5 (현재 독 수치)
  위치: 플레이어 상단

예시:
- 독 3 → 💀3
- 독 5 → 💀5

스택 예시:
- 독 3 + 독 2
  → 독 5
  → UI: 💀5

메커니즘:
- 플레이어 턴 시작 시:
  1. 현재 독 수치만큼 HP 감소
  2. 독 수치 -1 감소
  3. 독 0이 되면 제거

턴 진행 예시 (독 5):
- 턴 1: HP -5, 독 5 → 4
- 턴 2: HP -4, 독 4 → 3
- 턴 3: HP -3, 독 3 → 2
- 턴 4: HP -2, 독 2 → 1
- 턴 5: HP -1, 독 1 → 0 (제거)
- 총 데미지: 5+4+3+2+1 = 15

데미지 팝업 표시: (-5, 보라색)
```

---

### WEAK - 약화

```
ID: WEAK
이름: 약화
타입: 지속형
효과: 공격력 -25% (고정), N턴

UI:
  아이콘: ↓ (회색)
  표시: ↓3 (남은 턴 수만 표시)
  위치: 플레이어 상단

예시:
- 약화(2) → ↓2, 공격력 -25%
- 약화(3) → ↓3, 공격력 -25%

스택 예시:
- 약화(2) + 약화(3)
  → 약화(5)
  → UI: ↓5
  → 공격 20 → 약화 -25% → 실제 15 데미지
  → 5턴 동안 지속

메커니즘:
- 플레이어 공격 시 데미지 25% 감소 (고정)
- 예: 공격 20 → 약화 -25% → 실제 15 데미지
- 턴마다 지속시간 -1, 0이 되면 제거

설계 원칙:
- 하나의 효과는 숫자를 하나만 가짐
- 약화(3) = 3턴 동안 -25% (효과는 고정)
- 약화(3, -30%) 같은 이중 표기 금지
```

---

### VULNERABLE - 취약

```
ID: VULNERABLE
이름: 취약
타입: 지속형
효과: 받는 데미지 +50% (고정), N턴

UI:
  아이콘: ⚠️ (보라색)
  표시: ⚠️2 (남은 턴 수만 표시)
  위치: 플레이어 상단

예시:
- 취약(2) → ⚠️2, 받는 데미지 +50%
- 취약(1) → ⚠️1, 받는 데미지 +50%

스택 예시:
- 취약(2) + 취약(3)
  → 취약(5)
  → UI: ⚠️5
  → 적 공격 10 → 취약 +50% → 실제 15 데미지
  → 5턴 동안 지속

메커니즘:
- 적 공격 시 플레이어가 받는 데미지 50% 증가 (고정)
- 예: 적 공격 10 → 취약 +50% → 실제 15 데미지
- 턴마다 지속시간 -1, 0이 되면 제거

설계 원칙:
- 하나의 효과는 숫자를 하나만 가짐
- 취약(2) = 2턴 동안 +50% (효과는 고정)
- 취약(2, +75%) 같은 이중 표기 금지
```

---

### EXHAUSTED - 탈진

```
ID: EXHAUSTED
이름: 탈진
타입: 스택형
효과: 턴 종료 시 힘(STR) N만큼 감소, 발동 후 소멸
대상: 적 (자신)

UI:
  아이콘: 📉 (회색)
  표시: 📉5 (턴 종료 시 감소할 수치)
  위치: 적 상단

예시:
- 탈진(5) → 📉5
- 탈진(3) → 📉3

일시적 강화 구현:
적이 일시적으로 강화되려면 두 가지를 동시에 적용:
1. 힘(+5) 획득 → 공격력 +5
2. 탈진(5) 획득 → 턴 종료 시 힘 -5

턴 진행 예시:
- 초기 상태: 힘(0), 공격력 10
- 일시적 강화 발동: 힘(+5) + 탈진(5) 획득
  → UI: 💪5 📉5
  → 공격력 10 → 15
- 턴 중: 공격력 15로 공격
- 턴 종료: 탈진(5) 발동
  → 힘 5 - 5 = 0
  → 탈진(5) 소멸
- 다음 턴: 힘(0), 공격력 10으로 복구

복합 예시 (영구 + 일시적):
- 초기: 힘(3), 공격력 13
- 일시적 강화: 힘(+5) + 탈진(5)
  → 힘 3 + 5 = 8
  → UI: 💪8 📉5
  → 공격력 13 → 18
- 턴 종료: 탈진(5) 발동
  → 힘 8 - 5 = 3
  → 공격력 18 → 13
- 결과: 영구 힘(3)은 유지

음수 예시 (약화):
- 초기: 힘(0), 공격력 10
- 힘 감소: 힘(-3) 획득
  → UI: 💪-3
  → 공격력 10 → 7

스택 예시:
- 탈진(5) + 탈진(3)
  → 탈진(8)
  → UI: 📉8
  → 턴 종료 시 힘 8 감소

참고: Slay the Spire의 "Lose Strength" 시스템
```

---

## ⚙️ 적용 규칙

### UI 표시 규칙

```
아이콘 배치:
┌─────────────────────┐
│ 적 상단             │
│  💪5 🛡️10 ✚2 📉5   │  ← 버프/디버프
└─────────────────────┘

┌─────────────────────┐
│ 플레이어 상단       │
│  💀3 ↓1 ⚠️2        │  ← 디버프들
└─────────────────────┘

표시 형식:
- 아이콘 + 숫자 (남은 턴 수 또는 수치)
- 영구 효과: 아이콘만 (숫자 없음)
- 여러 효과: 가로로 나열

색상:
- 버프: 밝은 색상 (빨강, 파랑, 초록 등)
- 디버프: 어두운/경고 색상 (녹색, 주황, 회색, 보라 등)
```

### 우선순위 및 적용 순서

```
턴 시작 시 순서:
1. 재생 (REGEN)
   - 현재 재생 수치만큼 HP 회복
   - 재생 수치 -1 감소
2. 버프/디버프 지속시간 -1
   - WEAK, VULNERABLE: 지속시간 -1
3. DOT 데미지 (독)
   - 현재 독 수치만큼 HP 감소
   - 독 수치 -1 감소

턴 종료 시 순서:
1. 탈진 (EXHAUSTED)
   - 힘 수치 N만큼 감소
   - 탈진 소멸

데미지 계산 순서:
1. 버프/디버프 % 계산 (약화, 취약)
2. 기본 데미지 계산
3. 최종 데미지 적용
```

---

## 🎯 구현 우선순위

### MVP (현재 구현)

```
✅ 버프/디버프 (공통):
  - STR (힘) - 공격력 증감 (양수=버프, 음수=디버프)
    - 오크 HP 50% 이하: 힘(+5) 자동 발동 (영구)

✅ 버프 (적):
  - ARMOR (철갑) - 슬라임, 오크 방어 행동

✅ 디버프 (적 자신):
  - EXHAUSTED (탈진) - 일시적 강화 구현용 (턴 종료 시 힘 감소)

✅ 디버프 (플레이어):
  - 없음 (MVP에서는 제외)
```

### Post-MVP Phase 1

```
🔶 버프:
  - REGEN (재생) - 골렘, 트롤

🔶 디버프:
  - POISON (독) - 고블린, 버섯 괴물, 마법사

참고: STR(힘)은 MVP에서 오크 전용으로 구현, Phase 1에서 일반 적 버프 행동으로 확장
```

### Post-MVP Phase 2

```
🔶 디버프:
  - WEAK (약화) - 저주사, 다크 나이트
  - VULNERABLE (취약) - 오크 대장, 버서커
```

### Post-MVP Phase 3

```
🔶 정화 시스템:
  - 플레이어가 디버프 제거 가능
  - 정화 블록 또는 포션

🔶 상태 효과 조합:
  - 독 + 화상 동시 적용
  - 약화 + 취약 동시 적용
  - 복잡한 시너지
```

---

**작성일**: 2025-12-17
**최종 수정**: 2025-12-18
**버전**: 1.3 (ARMOR → PLATED 변경)
**담당**: 게임 디자인

**주요 변경사항**:

**v1.3 (2025-12-18)**:
- ARMOR → PLATED 변경
  - 이름: 철갑 → 금속화
  - 메커니즘: 고정 데미지 감소 (영구, 소모 없음)
  - 받는 데미지를 N만큼 감소, 여러 번 공격받아도 적용
  - 전통적인 RPG의 방어력(Armor Rating)과 유사

**v1.2 (2025-12-18)**:
- 중복 필드 제거: "지속:", "스택:" 제거
- 타입 필드로 통일: 스택형/감소형/지속형
- 설계 원칙에서 타입별 동작 정의
- 단일 숫자 원칙 적용
